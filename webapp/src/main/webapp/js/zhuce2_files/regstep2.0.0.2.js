function checkNull(){var e=!1,o=/^\s*$/g,a=document.getElementById("step2verifCode").value;return""===a||o.test(a)?(errorCode(".c_new_prompt","#step2verifCode","请输入图形验证码"),fish.one("#step2verifCode").removeClass("c_right"),!1):(fish.ajax({url:"/AjaxHandler/ValidCode.ashx?action=registerverficationcode&codeKey="+a+"&name="+fish.one("#mobileNum").val(),type:"string",sync:!0,fn:function(o){"1"===o?(errorCode(".c_new_prompt","#step2verifCode","验证码输入错误，请重新输入"),fish.one("#step2verifCode").removeClass("c_right"),e=!1):(sucCode(".c_new_prompt","#step2verifCode",""),fish.one("#step2verifCode").addClass("c_right"),e=!0)}}),e)}function initShow(){fish.one(".c_new_prompt").removeClass("c_invalid_new_prompt"),fish.one(".c_new_prompt").html(""),fish.one("#step2verifCode").removeClass("c_invalid_focus"),fish.one("#step2verifCode").removeClass("c_new_focus")}function errorCode(e,o,a){fish.one(o).addClass("c_invalid_focus"),fish.one(e).addClass("c_invalid_new_prompt"),fish.one(e).html(a)}function sucCode(e,o,a){fish.one(e).removeClass("c_invalid_new_prompt"),fish.one(e).html(a),fish.one(o).removeClass("c_invalid_focus")}function findNextSibling(e,o){for(e=e.nextSibling;e;){if(o(e))return e;e=e.nextSibling}return null}function findNextSiblingNode(e){return findNextSibling(e,function(e){return!(!e||1!==e.nodeType)})}function findLastSiblingNode(e){return findNextSibling(e,function(e){return!(!e||1!==e.nodeType||!(null==e.nextSibling||e.nextSibling&&null==e.nextSibling.nextSibling&&3==e.nextSibling.nodeType))})}function showPrompt(e,o){var a=findLastSiblingNode(e);a.className="prompt",a.innerHTML=o}function showInvalidMessage(e,o){fish.one(e).hasClass("input")&&fish.one(e).addClass("invalid");var a=findLastSiblingNode(e);a.className="invalid_message",a.innerHTML=o}function showValidMessage(e,o){var a=findLastSiblingNode(e);a.className="valid_message",a.innerHTML=o}function showValidSymbol(e,o){fish.one(e).hasClass("invalid")&&fish.one(e).removeClass("invalid");var a=findLastSiblingNode(e),n=a.getAttribute("data-class-suffix");a.className=null!=n?"valid_symbol_"+n:"valid_symbol",a.innerHTML=o}function changeVerifCodeImg(e){null==e&&(e=document.getElementById("verifCodeImg")),e.src="/AjaxHandler/ValidCode.ashx?action=registercheckcode&ran="+Math.random()+"&name="+fish.one("#mobileNum").val()}function changeVerifCodeImg2(e){null==e&&(e=document.getElementById("step2verifCodeImg")),e.src="/AjaxHandler/ValidCode.ashx?action=registercheckcode&ran="+Math.random()+"&name="+fish.one("#mobileNum").val()}function checkPasswordStrength(e){var o=["a123456","123456a","qwe123","qqq111","qqqqqq1","cj000000","123456abc","abc123","pppppp1","qqqqq1","q123456","281457jia","asd123","qq123456","abc123456","qwerty1","a12345","123abc","z123456","qwer1234","qqqq1111","a123456789","w123456","tc201314","aa123456","pppppp0","a111111","abcd1234","1qaz2wsx","123456789a","123456q","qaz123","qqqqqq11","aaa111","Aa123456","a123123","qazwsx123","q111111","qwerty123","qqqqqqq1","q11111","zxc123","123456aa","zxcvbnm123","dfaeff34232","woaini1314","ppp000","g123456","201314","1q2w3e4r","a321321","1234qwer","a1234567","A123456","abc123ddd","ppppp1","a12345678","qqqq11","q12345","a11111","qwe123456","aaaaaa1","123456qq","y123456","asd123456","ppppp0","ABCabc123","zxcvbnm"],a=fish.all(".password_strength p");if(a.removeClass("current_level_pointing"),0!=e.length){e.length<6||/^\d+$/.test(e)||/^[A-Za-z]+$/.test(e)||/\s+/.test(e)?a[0].className="current_level_pointing":e.length>=6&&e.length<10?(a[0].className="current_level_pointing",a[1].className="current_level_pointing"):(a[0].className="current_level_pointing",a[1].className="current_level_pointing",a[2].className="current_level_pointing");for(var n=0;n<o.length;n++)if(e===o[n]){a.removeClass("current_level_pointing");break}}}function mobileVerifCodeValidator(e){var o=e.value;return""===o?(showInvalidMessage(e,"请输入手机验证码"),!1):4==o.length||(showInvalidMessage(e,"手机验证码错误，请重新输入"),!1)}function initResend(){fish.cookie.get("register_mobile_verif_code")||(sendMobileVerifCode(),document.cookie="register_mobile_verif_code=sent;expires="+new Date((new Date).getTime()+6e4).toUTCString());var e=fish.dom("#resend");countDownSecond(60,function(o){showRemainingSecond(e,o)})}function showRemainingSecond(e,o){e.innerHTML="重新发送短信("+o+"秒)",0==o&&(e.className="resend",e.innerHTML="重新发送短信",showPrompt(e,""))}function countDownSecond(e,o){if("number"==typeof e){o(e);var a=setInterval(function(){e--,e<=0&&clearInterval(a),o(e)},1e3)}}function step2Submit(e){var inputElem=fish.dom("#mobileVerifCode");initShow(),mobileVerifCodeValidator(inputElem)&&fish.ajax({url:"/AjaxHandler/AlipayPassportInterface.aspx",data:"ft=CheckMoblieCode&sourceCode="+inputElem.value+"&Token="+document.getElementById("Token").value,type:"string",fn:function(data){if(data.length>10){var data=eval("("+data+")");data.IsSuccess&&document.forms.registerStep2.submit(),"14200"===data.Status&&showInvalidMessage(inputElem,"请点击按钮获取短信验证码"),"14201"===data.Status&&(1==parseInt(data.ErrorCount)?showInvalidMessage(inputElem,"验证码错误，请重输入"):5!=parseInt(data.ErrorCount)?showInvalidMessage(inputElem,"验证码错误，还有"+parseInt(5-parseInt(data.ErrorCount))+"次机会"):showInvalidMessage(inputElem,"验证码错误，请重新获取验证码")),"14202"===data.Status&&showInvalidMessage(inputElem,"验证码错误，请重新获取验证码"),"14203"===data.Status&&showInvalidMessage(inputElem,"验证信息失效，请重新获取验证码")}else switch(data){case"1":document.forms.registerStep2.submit();break;case"2":showInvalidMessage(inputElem,"您的操作过于频繁，请稍后再试");break;case"3":showInvalidMessage(inputElem,"60秒内只能获取一次短信，请稍后再试");break;case"4":showInvalidMessage(inputElem,"您已经超过每日获取短信上限，请次日再试");break;default:showInvalidMessage(inputElem,"验证码输入错误，请重新输入")}}})}function resendMobileVerifCode(e){if(!fish.one(this).hasClass("resend_disabled")&&!fish.one(this).hasClass("resend_invalid")&&checkNull()){var o=this,a=document.getElementById("step2verifCode").value;sendMobileVerifCode(function(e){switch(e){case"0":o.className="resend_disabled",showValidMessage(o,"发送成功，请耐心等待"),changeVerifCodeImg2(),countDownSecond(60,function(e){showRemainingSecond(o,e)});break;case"1":showInvalidMessage(o,"发送失败，请重试"),changeVerifCodeImg2();break;case"2":o.className="resend resend_invalid",showInvalidMessage(o,"发送次数已达上限"),changeVerifCodeImg2();break;case"3":o.className="resend resend_invalid",showInvalidMessage(o,"60秒内只能获取一次短信，请稍后再试"),changeVerifCodeImg2();break;case"4":errorCode(".c_new_prompt","#step2verifCode","验证码输入错误，请重新输入"),changeVerifCodeImg2();break;case"6":showInvalidMessage(b,"验证信息失效，请重新注册"),changeVerifCodeImg2()}},a)}}function sendMobileVerifCode(e,o){fish.ajax({url:"/AjaxHandler/SendMessage.ashx",data:"action=sendAgainMessage&Token="+document.forms.registerStep2.Token.value+"&checkcode="+o,fn:function(o){"function"==typeof e&&e(o)}})}function serialize(e){var o,a,n,i,t,s,r=[],d=null;for(o=0,a=e.elements.length;o<a;o++)switch(d=e.elements[o],d.type){case"select-one":case"select-multiple":if(d.name.length)for(n=0,i=d.options.length;n<i;n++)t=d.options[n],t.selected&&(s="",s=t.hasAttribute?t.hasAttribute("value")?t.value:t.text:t.attributes.value.specified?t.value:t.text,r.push(encodeURIComponent(d.name)+"="+encodeURIComponent(s)));break;case void 0:case"file":case"submit":case"reset":case"button":break;case"radio":case"checkbox":if(!d.checked)break;default:d.name.length&&r.push(encodeURIComponent(d.name)+"="+encodeURIComponent(d.value))}return r.join("&")}fish.ready(function(e){function getCookieDomain(e){return location.hostname.match(/^(\d+\.\d+\.\d+\.\d+)|(localhost)$/)?location.hostname:"all"==e?location.hostname:/.*(\..*\..*)$/.exec(location.hostname)[1]}function getValue(e){return document.getElementById(e)?document.getElementById(e).value:null}function validatorSubmit(){if(_bAnsy&&mobileCorrect&&pwdOnceCorrect&&pwdTwiceCorrect&&verifCodeCorrect&&lmkhCorrect&&lmhyhCorrect&&submitClick){var e="action=CheckAllJudgement&mobile="+getValue("mobileNum")+"&checkcode="+getValue("verifCode");document.getElementById("lmk").checked?-1==document.forms.registerStep1.refid.value?e+="&refid=&randno=&cardno=":e+="&refid="+document.forms.registerStep1.refid.value+"&randno="+getValue("lmhyh")+"&cardno="+getValue("lmkh"):e+="&refid=&randno=&cardno=",fish.ajax({url:"/AjaxHandler/RegisterCheckHandler.ashx?",openType:"post",type:"string",data:e+"&bdstr="+fish.one("#__bdstr_input__").val(),fn:function(e){"blocked"===e?(fish.one("#step1Submit").html(""),fish.one("#step1Submit").removeClass("register_submit_btn").addClass("btn_sign_loading"),fish.one("#modulecheck").trigger("click")):"passed"===e?(document.forms.registerStep1.submit(),fish.one("#step1Submit").html(""),fish.one("#step1Submit").removeClass("register_submit_btn").addClass("btn_sign_loading")):"2"==e?(showInvalidMessage(document.getElementById("verifCode"),"验证码输入错误，请重新输入"),verifCodeCorrect=!1,_bAnsy=!1,changeVerifCodeImg()):"3"==e?(showInvalidMessage(document.getElementById("mobileNum"),'手机号已注册，请更换或用手机号<a rel="nofollow" href=https://passport'+strHost+"/"+location.search+' class="c_reg_login">登录</a>'),mobileCorrect=!1,_bAnsy=!1,changeVerifCodeImg()):"31"==e?(showInvalidMessage(document.getElementById("mobileNum"),"手机号码格式不正确，请重新输入"),mobileCorrect=!1,_bAnsy=!1,changeVerifCodeImg()):"4"==e?(showInvalidMessage(document.getElementById("mobileNum"),"此手机号已达短信上限，请更换手机号或明天再试"),mobileCorrect=!1,_bAnsy=!1,changeVerifCodeImg()):"101"==e&&(showInvalidMessage(document.getElementById("refid"),"联名会员号格式不正确，请重新输入"),lmkhCorrect=!1,_bAnsy=!1,changeVerifCodeImg())}})}}fish.admin.config({mSerialize:{v:.1,g:2013072401},mPop:{v:"0.2.4",css:1,g:10130821001}}),fish.one(".has_read a").on("click",function(){fish.mPop({content:fish.one(".clause"),afterClose:function(){fish.one(".clause").css("display:none")}})}),fish.one(".clause_close").on("click",function(){fish.mPop.close()});var weakpwdlist=["a123456","123qwe","123456a","qwe123","qqq111","qqqqqq1","cj000000","123456abc","abc123","pppppp1","qqqqq1","q123456","281457jia","asd123","qq123456","abc123456","qwerty1","a12345","123abc","z123456","qwer1234","qqqq1111","a123456789","w123456","tc201314","aa123456","pppppp0","a111111","abcd1234","1qaz2wsx","123456789a","123456q","qaz123","qqqqqq11","aaa111","Aa123456","a123123","qazwsx123","q111111","qwerty123","qqqqqqq1","q11111","zxc123","zxcvbnm123","dfaeff34232","woaini1314","ppp000","g123456","1q2w3e4r","a321321","1234qwer","a1234567","A123456","abc123ddd","ppppp1","a12345678","qqqq11","q12345","a11111","qwe123456","aaaaaa1","123456qq","y123456","asd123456","ppppp0","ABCabc123","zxcvbnm","woaini520","woaini123","a5201314","zhang123","aptx4869","1A2B3C4D","123123a","1q2w3e4r5t","1qazxsw2","5201314a","1q2w3e","aini1314","q1w2e3r4","31415926","woaini521","iloveyou","123qweasd","a000000","qq123123","qq5201314","000000a","as123456","zxc123456","asdasd","love1314","aaa123","q1w2e3","a123321","12qwaszx","s123456","nihao123","wang123","qq1314520","a1b2c3","p@ssword","123qwe!@#","1qaz@WSX","123456.","123456aa","zz12369","qq66666","w2w2w2","a12369"],strHost;strHost=getCookieDomain();var mobileCorrect=!1,pwdOnceCorrect=!1,pwdTwiceCorrect=!1,verifCodeCorrect=!1,lmkhCorrect=!1,lmhyhCorrect=!1,clauseAgreeCorrect=!1,_bAnsy=!0,submitClick=!1,validatorToolBox={mobilephoneValidator:function(e){if(_bAnsy){var o=e.value;return""===o||o===e.getAttribute("text-placeholder")?(showInvalidMessage(e,"请输入手机号码"),mobileCorrect=!1,!1):fish.valida.phone(o)?(mobileCorrect=!0,!0):(showInvalidMessage(e,"手机号码格式不正确，请重新输入"),mobileCorrect=!1,!1)}},passwordValidator:function(e){var o=e.value;if(""===o||o===e.getAttribute("text-placeholder")||o.length<6||o.length>18)return showInvalidMessage(e,"6-18位，字母、数字、特殊符号中的两种或两种以上，不能单独使用字母、数字或符号"),fish.one(".invalid_message",fish.one(".c_two_register_info_line ")).removeClass("repwd"),pwdOnceCorrect=!1,!1;if(/\s+/.test(o))return showInvalidMessage(e,"密码中存在非法字符，请重新输入密码！"),fish.one(".invalid_message",fish.one(".c_two_register_info_line ")).addClass("repwd"),pwdOnceCorrect=!1,!1;if(/^\d{6,18}$/.test(o)||/^[A-Za-z]{6,18}$/.test(o)||!/.*\w.*/.test(o))return showInvalidMessage(e,"6-18位，字母、数字、特殊符号中的两种或两种以上，不能单独使用字母、数字或符号"),fish.one(".invalid_message",fish.one(".c_two_register_info_line ")).removeClass("repwd"),pwdOnceCorrect=!1,!1;for(var a=0;a<weakpwdlist.length;a++)if(o===weakpwdlist[a])return showInvalidMessage(e,"密码太简单啦"),fish.one(".invalid_message",fish.one(".c_two_register_info_line ")).addClass("repwd"),pwdOnceCorrect=!1,!1;return showValidSymbol(e,""),pwdOnceCorrect=!0,!0},rePasswordValidator:function(e){var o=e.value;return""===o||o===e.getAttribute("text-placeholder")?(showInvalidMessage(e,"请输入确认密码"),pwdTwiceCorrect=!1,!1):o!==document.forms.registerStep1.pwdOnce.value?(showInvalidMessage(e,"两次输入的密码不一致，请重新输入"),pwdTwiceCorrect=!1,!1):(pwdTwiceCorrect=!0,showValidSymbol(e,""),!0)},verifCodeValidator:function(e){var o=e.value;return""!==o&&o!==e.getAttribute("text-placeholder")||(showInvalidMessage(e,"请输入验证码"),verifCodeCorrect=!1,!1)},coBrandCardNoValidator:function(e){var o=document.forms.registerStep1.refid;if(!document.getElementById("lmk").checked||-1==document.forms.registerStep1.refid.value||fish.one(e.parentNode).hasClass("none"))return lmkhCorrect=!0,!0;var a=e.value;if(""===a||a===e.getAttribute("text-placeholder"))return showInvalidMessage(e,"请输入银行卡号"),lmkhCorrect=!1,!1;var n=o.options[o.selectedIndex].getAttribute("data-card-type-regex");return!!(n?new RegExp(n,"g"):/^\d*$/).test(a)||(showInvalidMessage(e,"银行卡号格式不正确，请重新输入"),lmkhCorrect=!1,!1)},memberNoValidator:function(e){var o=document.forms.registerStep1.refid;if(!document.getElementById("lmk").checked||-1==o.value||fish.one(e.parentNode).hasClass("none"))return lmhyhCorrect=!0,!0;var a=e.value;if(""===a||a===e.getAttribute("text-placeholder"))return showInvalidMessage(e,"请输入11位联名会员号"),lmhyhCorrect=!1,!1;var n=o.options[o.selectedIndex].getAttribute("data-card-type-regex"),i=n?new RegExp(n,"g"):/^\d*$/;return!(11!==a.length||!i.test(a))||(showInvalidMessage(e,"联名会员号格式不正确，请重新输入"),lmhyhCorrect=!1,!1)},agreeClauseValidator:function(e){return 0!=e.checked||(showInvalidMessage(e,"请勾选"),clauseAgreeCorrect=!1,!1)}};fish.one("#mobileNum").on("keyup",function(){if(11==fish.one("#mobileNum").val().length);else{submitClick=!1,_bAnsy=!0,fish.one(this).removeClass("invalid").addClass("focus");var e=this.getAttribute("data-prompt");null==e&&(e="");var o=findLastSiblingNode(this);o.className="prompt",o.innerHTML=e}}),fish.one("#pwdOnce").on("keyup",function(){if(fish.one("#pwdOnce").val().length>=6)validatorToolBox.passwordValidator(fish.dom("#pwdOnce"));else{submitClick=!1,_bAnsy=!0,fish.one(this).removeClass("invalid").addClass("focus");var e=this.getAttribute("data-prompt");null==e&&(e="");var o=findLastSiblingNode(this);o.className="prompt",o.innerHTML=e}}),fish.one("#pwdTwice").on("keyup",function(){if(fish.one("#pwdTwice").val().length>=6)validatorToolBox.rePasswordValidator(fish.dom("#pwdTwice"));else{submitClick=!1,_bAnsy=!0,fish.one(this).removeClass("invalid").addClass("focus");var e=this.getAttribute("data-prompt");null==e&&(e="");var o=findLastSiblingNode(this);o.className="prompt",o.innerHTML=e}}),fish.one("#verifCode").on("keyup",function(){if(4==fish.one("#verifCode").val().length)remoteValidatorToolbox.isVerifCodeCorrect(fish.dom("#verifCode"));else{submitClick=!1,_bAnsy=!0,fish.one(this).removeClass("invalid").addClass("focus");var e=this.getAttribute("data-prompt");null==e&&(e="");var o=findLastSiblingNode(this);o.className="prompt",o.innerHTML=e}});var remoteValidatorToolbox={remoteVertificationResults:{},submitDecide:function(e,o,a,n){if(void 0!==o&&(remoteValidatorToolbox.remoteVertificationResults[e]=!0,remoteValidatorToolbox.remoteVertificationResults[e],!0===n)){var i=!0;for(var e in a)if(a.hasOwnProperty(e)&&!0!==remoteValidatorToolbox.remoteVertificationResults[e]){i=!1;break}!0===i&&o.submit()}},isVerifCodeCorrect:function(e,o,a,n){!1!==validatorToolBox.verifCodeValidator(e)&&fish.ajax({url:"/AjaxHandler/RegisterCheckHandler.ashx",type:"string",data:"action=checkcode&checkcode="+e.value,fn:function(a){switch(a){case"1":verifCodeCorrect=!1,showInvalidMessage(e,"验证码输入错误，请重新输入"),void 0!==o&&changeVerifCodeImg();break;case"0":verifCodeCorrect=!0,showValidSymbol(e,""),validatorSubmit()}}})},isCoBrandCardNoCorrect:function(e,o,a,n){var i=document.forms.registerStep1.refid,t=i.options[i.selectedIndex],s=t.getAttribute("data-card-type"),r=null;if(r="3"===s||"2"===s?i.value:0,!document.getElementById("lmk").checked||-1==i.value||fish.one(e.parentNode).hasClass("none"))return lmkhCorrect=!0,void remoteValidatorToolbox.submitDecide(e.name,o,a,n);!1!==validatorToolBox.coBrandCardNoValidator(e)&&fish.ajax({url:"/AjaxHandler/RegisterCheckHandler.ashx",type:"string",data:"action=checkcardno&cardType=1&refid="+r+"&cardno="+e.value,fn:function(o){switch(o){case"1":lmkhCorrect=!1,showInvalidMessage(e,"该银行卡号错误或已注册，更换其他卡号");break;default:lmkhCorrect=!0,showValidSymbol(e,""),validatorSubmit()}}})},isMemberNoCorrect:function(e,o,a,n){var i=document.forms.registerStep1.refid;if(!document.getElementById("lmk").checked||-1==i.value||fish.one(e.parentNode).hasClass("none"))return remoteValidatorToolbox.submitDecide(e.name,o,a,n),void(lmhyhCorrect=!0);!1!==validatorToolBox.memberNoValidator(e)&&fish.ajax({url:"/AjaxHandler/RegisterCheckHandler.ashx",type:"string",data:"action=checkcardno&refid="+i.value+"&randno="+e.value,fn:function(o){switch(o){case"0":lmhyhCorrect=!1,showInvalidMessage(e,"联名会员号不正确，请重新输入");break;default:lmhyhCorrect=!0,showValidSymbol(e,""),validatorSubmit()}}})}};if(fish.one("#mobileNum").on("blur",function(){validatorToolBox.mobilephoneValidator(fish.dom("#mobileNum"))&&fish.ajax({url:"https://passport.ly.com/AjaxHandler/ValidCode.ashx?action=registercheckcode&name="+fish.one("#mobileNum").val(),fn:function(e){e&&changeVerifCodeImg()}})}),document.forms.registerStep1){document.forms.registerStep1.reset(),fish.ajax({url:"//passport.ly.com/AjaxHandler/RegisterCheckHandler.ashx?action=returnlmkbind",fn:function(data){for(var coBrandCards=eval("("+data+")"),coBrandCardType=document.forms.registerStep1.refid,option,i=0,len=coBrandCards.length;i<len;i++)option=new Option(coBrandCards[i].CardName,coBrandCards[i].RefId),option.title=coBrandCards[i].CardName,option.setAttribute("data-card-type",coBrandCards[i].CardType),""!=coBrandCards[i].CardRegex&&option.setAttribute("data-card-type-regex",coBrandCards[i].CardRegex),coBrandCardType.options.add(option)}}),fish.mCitySelect({province:document.forms.registerStep1.address_province,city:document.forms.registerStep1.address_city,valueName:"id"});var validatorConfig={mobileNum:"mobilephoneValidator",pwdOnce:"passwordValidator",pwdTwice:"rePasswordValidator",verifCode:"verifCodeValidator",lmkh:"coBrandCardNoValidator",lmhyh:"memberNoValidator",lma:"agreeClauseValidator"},remoteValidatorConfig={verifCode:"isVerifCodeCorrect",lmkh:"isCoBrandCardNoCorrect",lmhyh:"isMemberNoCorrect"};fish.all(".input").on("focus",function(e){submitClick=!1,_bAnsy=!0,fish.one(this).removeClass("invalid").addClass("focus");var o=this.getAttribute("data-prompt");null==o&&(o="");var a=findLastSiblingNode(this);a.className="prompt",a.innerHTML=o}).on("blur",function(e){var o=this;submitClick=!1,fish.one(o).removeClass("focus"),validatorConfig[o.name]&&validatorToolBox[validatorConfig[o.name]]&&validatorToolBox[validatorConfig[o.name]](o)&&remoteValidatorConfig[o.name]&&remoteValidatorToolbox[remoteValidatorConfig[o.name]]&&remoteValidatorToolbox[remoteValidatorConfig[o.name]](o)}),fish.one("#pwdOnce").on("keyup",function(e){checkPasswordStrength(this.value)}),fish.one("#verifCodeImg").on("click",function(e){changeVerifCodeImg(this)}),fish.one("#changeVerifCodeImg").hover(function(e){this.className="change_verif_code_img_hover"},function(e){this.className="change_verif_code_img"}),fish.one("#changeVerifCodeImg").on("click",function(e){changeVerifCodeImg()}),fish.one(".has_co_brand_card_line em").on("click",function(){var e=fish.one(".has_co_brand_card_line em"),o=fish.dom("#lmk");e.toggleClass("gou"),e.hasClass("gou")?(o.checked=!0,fish.one(".co_brand_card_wrapper").removeClass("none")):(o.checked=!1,fish.one(".co_brand_card_wrapper").addClass("none"))});var agree_gou=fish.one(".has_read_and_agree_line em"),agree_selected=fish.dom("#lma");agree_gou.addClass("gou"),agree_selected.checked=!0,agree_gou.on("click",function(){if(agree_gou.toggleClass("gou"),agree_gou.hasClass("gou")){agree_selected.checked=!0,submitClick=!1,_bAnsy=!0;var e=findLastSiblingNode(this);e.className="prompt",e.innerHTML=""}else agree_selected.checked=!1}),fish.one("#refid").on("change",function(e){if("-1"===this.value)fish.one(".co_brand_card_panel").addClass("none");else{switch(this.options[this.selectedIndex].getAttribute("data-card-type")){case"1":fish.one(".co_brand_card_no_line").addClass("none"),fish.one(".membership_no_line").removeClass("none");break;case"2":fish.one(".co_brand_card_no_line").removeClass("none"),fish.one(".membership_no_line").removeClass("none");break;case"3":fish.one(".co_brand_card_no_line").removeClass("none"),fish.one(".membership_no_line").addClass("none")}fish.one(".co_brand_card_panel").removeClass("none")}}),fish.one("#step1Submit").on("click",function(e){for(var o in validatorConfig)validatorToolBox[validatorConfig[o]](document.forms.registerStep1[o])||!0;submitClick=!0,validatorSubmit()})}else if(document.forms.registerStep2){var resendElem=fish.dom("#resend"),resendBoxt=fish.one(".resend_wrapper");fish.one(".no_get").on("click",function(e){resendBoxt.toggleClass("none")}),countDownSecond(60,function(e){showRemainingSecond(resendElem,e)}),fish.one("#cStep2changeVerifCodeImg").on("click",function(e){changeVerifCodeImg2()}),fish.one("#step2verifCodeImg").on("click",function(e){changeVerifCodeImg2(this)}),fish.one("#mobileVerifCode").on("focus",function(e){initShow(),fish.one(this).removeClass("invalid").addClass("focus"),showPrompt(this,""),fish.one("#cMyPrompt").removeClass("valid_message").removeClass("invalid_message").addClass("prompt").html("")}).on("blur",function(e){fish.one(this).removeClass("focus")}),fish.one("#step2verifCode").on("focus",function(e){fish.one(this).removeClass("c_invalid_focus"),fish.one(this).addClass("c_new_focus"),fish.one(".c_new_prompt").removeClass("c_invalid_new_prompt"),fish.one(".c_new_prompt").html("")}).on("blur",function(e){initShow(),checkNull()}),fish.one("#step2Submit").on("click",step2Submit),fish.one("#resend").on("click",resendMobileVerifCode)}});