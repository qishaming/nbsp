!function(e,a){function t(a,t){var o={elemHeight:36,outBoxElem:null,offset:{x:0,y:0},isMerge:!1,clickCallback:null};e.extend(this,o,t),this.input=e(a),this.init()}e.fn.areaCodeSelect=function(e){return this.each(function(){new t(this,e)})},t.prototype={init:function(){var a=this.createGuid(),t="";t+='<div id="areaCodeSelect-'+a+'" class="pt__areacode_wrap'+(this.isMerge?" areacode_wrap_merge":"")+'" style="display: none"><div class="areacode_wrap_box"><span class="pt__areacode_close"></span><div class="pt__areacode_con"></div></div></div>',e("body").append(t),this.wrap=e("#areaCodeSelect-"+a),this.hasScrollJs=!1,this.input.css({height:this.elemHeight+"px","line-height":this.elemHeight+"px"}),this.getAjaxData()},eventInit:function(){var a=this;a.outBoxElem?a.outBoxElem.on("click",function(e){a.show()}):a.input.on("click",function(e){a.show()}),e(document).on("click",function(t){var o=t.target;a.outBoxElem?e(o).closest(a.outBoxElem)[0]||e(o).closest(a.wrap)[0]||a.hide():o==a.input[0]||e(o).closest(a.wrap)[0]||a.hide()}),a.wrap.on("click",".pt__areacode_tray .areacode-normal",function(t){a.input.val(e(this).attr("attr-code")),"function"==typeof a.clickCallback&&a.clickCallback(e(this)),e(".pt__areacode_tray .areacode-normal",a.wrap).removeClass("areacode-at"),e(this).addClass("areacode-at"),a.hide()}),e(".pt__areacode_close",a.wrap).on("click",function(e){a.hide()}),e(window).on("resize",function(){"none"!=a.wrap.css("display")&&setTimeout(function(){a.positionWrap()},20)})},getAjaxData:function(){var a=[],t=this;e.ajax({url:"//www.ly.com/public/areacode",dataType:"jsonp",success:function(e){a=e?t.handlerAreaCode(e):t.handlerAreaCode(t.areaLocalData()),t.isMergeArea(a)},error:function(){a=t.handlerAreaCode(t.areaLocalData()),t.isMergeArea(a)}})},areaLocalData:function(){return{hot:[{code:86,name:"中国",g:"Z",z:"YZ"},{code:852,name:"中国香港",g:"Z",z:"YZ"},{code:853,name:"中国澳门",g:"Z",z:"YZ"},{code:886,name:"中国台湾",g:"Z",z:"YZ"},{code:81,name:"日本",g:"R",z:"YZ"},{code:82,name:"韩国",g:"H",z:"YZ"},{code:66,name:"泰国",g:"T",z:"YZ"}],city:[{code:61,name:"澳大利亚",g:"A",z:"DY"},{code:20,name:"埃及",g:"A",z:"FZ"},{code:251,name:"埃塞俄比亚",g:"A",z:"FZ"},{code:244,name:"安哥拉",g:"A",z:"FZ"},{code:355,name:"阿尔巴尼亚",g:"A",z:"OZ"},{code:376,name:"安道尔",g:"A",z:"OZ"},{code:43,name:"奥地利",g:"A",z:"OZ"},{code:353,name:"爱尔兰",g:"A",z:"OZ"},{code:54,name:"阿根廷",g:"A",z:"NM"},{code:92,name:"巴基斯坦",g:"B",z:"YZ"},{code:1441,name:"百慕大群岛",g:"B",z:"BM"},{code:507,name:"巴拿马",g:"B",z:"FZ"},{code:501,name:"伯利兹",g:"B",z:"FZ"},{code:354,name:"冰岛",g:"B",z:"OZ"},{code:375,name:"白俄罗斯",g:"B",z:"OZ"},{code:48,name:"波兰",g:"B",z:"OZ"},{code:32,name:"比利时",g:"B",z:"OZ"},{code:359,name:"保加利亚",g:"B",z:"OZ"},{code:670,name:"东帝汶",g:"D",z:"YZ"},{code:45,name:"丹麦",g:"D",z:"OZ"},{code:49,name:"德国",g:"D",z:"OZ"},{code:7,name:"俄罗斯",g:"E",z:"OZ"},{code:63,name:"菲律宾",g:"F",z:"YZ"},{code:679,name:"斐济",g:"F",z:"DY"},{code:358,name:"芬兰",g:"F",z:"OZ"},{code:33,name:"法国",g:"F",z:"OZ"},{code:53,name:"古巴",g:"G",z:"BM"},{code:299,name:"格陵兰岛",g:"G",z:"BM"},{code:1671,name:"关岛",g:"G",z:"DY"},{code:57,name:"哥伦比亚",g:"G",z:"NM"},{code:82,name:"韩国",g:"H",z:"YZ"},{code:7,name:"哈萨克斯坦",g:"H",z:"YZ"},{code:31,name:"荷兰",g:"H",z:"OZ"},{code:855,name:"柬埔寨",g:"J",z:"YZ"},{code:1,name:"加拿大",g:"J",z:"BM"},{code:420,name:"捷克",g:"J",z:"OZ"},{code:856,name:"老挝",g:"L",z:"YZ"},{code:218,name:"利比亚",g:"L",z:"FZ"},{code:370,name:"立陶宛",g:"L",z:"OZ"},{code:40,name:"罗马尼亚",g:"L",z:"OZ"},{code:352,name:"卢森堡",g:"L",z:"OZ"},{code:60,name:"马来西亚",g:"M",z:"YZ"},{code:960,name:"马尔代夫",g:"M",z:"YZ"},{code:880,name:"孟加拉国",g:"M",z:"YZ"},{code:976,name:"蒙古",g:"M",z:"YZ"},{code:1,name:"美国",g:"M",z:"BM"},{code:52,name:"墨西哥",g:"M",z:"BM"},{code:212,name:"摩洛哥",g:"M",z:"FZ"},{code:261,name:"马达加斯加",g:"M",z:"FZ"},{code:230,name:"毛里求斯",g:"M",z:"FZ"},{code:377,name:"摩纳哥",g:"M",z:"OZ"},{code:51,name:"秘鲁",g:"M",z:"NM"},{code:977,name:"尼泊尔",g:"N",z:"YZ"},{code:27,name:"南非",g:"N",z:"FZ"},{code:47,name:"挪威",g:"N",z:"OZ"},{code:351,name:"葡萄牙",g:"P",z:"OZ"},{code:81,name:"日本",g:"R",z:"YZ"},{code:46,name:"瑞典",g:"R",z:"OZ"},{code:41,name:"瑞士",g:"R",z:"OZ"},{code:94,name:"斯里兰卡",g:"S",z:"YZ"},{code:966,name:"沙特",g:"S",z:"YZ"},{code:685,name:"萨摩亚",g:"S",z:"DY"},{code:381,name:"塞尔维亚",g:"S",z:"OZ"},{code:66,name:"泰国",g:"T",z:"YZ"},{code:90,name:"土耳其",g:"T",z:"YZ"},{code:673,name:"文莱",g:"W",z:"YZ"},{code:58,name:"委内瑞拉",g:"W",z:"NM"},{code:380,name:"乌克兰",g:"W",z:"OZ"},{code:65,name:"新加坡",g:"X",z:"YZ"},{code:34,name:"西班牙",g:"X",z:"OZ"},{code:30,name:"希腊",g:"X",z:"OZ"},{code:36,name:"匈牙利",g:"X",z:"OZ"},{code:64,name:"新西兰",g:"X",z:"DY"},{code:62,name:"印尼",g:"Y",z:"YZ"},{code:84,name:"越南",g:"Y",z:"YZ"},{code:91,name:"印度",g:"Y",z:"YZ"},{code:972,name:"以色列",g:"Y",z:"YZ"},{code:39,name:"意大利",g:"Y",z:"OZ"},{code:44,name:"英国",g:"Y",z:"OZ"},{code:86,name:"中国",g:"Z",z:"YZ"},{code:853,name:"中国澳门",g:"Z",z:"YZ"},{code:886,name:"中国台湾",g:"Z",z:"YZ"},{code:852,name:"中国香港",g:"Z",z:"YZ"},{code:56,name:"智利",g:"Z",z:"NM"}]}},handlerAreaCode:function(e){var a={},t=e.city,o=[],c={};a.hot=e.hot;for(var n=0;n<t.length;n++){var r=t[n];if(c[r.g])for(var i=0;i<o.length;i++){var d=o[i];if(d.letter==r.g){d.area.push(r);break}}else o.push({letter:r.g,area:[r]}),c[r.g]=r}return a.city=o,a},isMergeArea:function(e){this.isMerge?this.buildMergeHtml(e):this.buildSingleHtml(e),this.eventInit(),this.areaSwitchFn()},buildSingleHtml:function(a){var t=a.hot,o=a.city,c=' <div class="pt__areacode_tab"><ul class="clearfix">',n="";t.length>0&&(c+='<li class="current">HOT</li>',n+='<div class="pt__areacode_tray clearfix">');for(var r=0;r<t.length;r++)n+='<span class="areacode-normal" title="'+t[r].name+t[r].code+'" attr-code="'+t[r].code+'"><em>'+t[r].name+"</em><i>"+t[r].code+"</i></span>";t.length>0&&(n+="</div>");for(var i=0;i<o.length;i++){var d=o[i].area,s=0==t.length&&0==i?"current":"",l=0==t.length&&0==i?"":"none";c+='<li class="'+s+'">'+o[i].letter+"</li>",n+='<div class="pt__areacode_tray '+l+' clearfix">';for(var m=0;m<d.length;m++)n+='<span class="areacode-normal" title="'+d[m].name+d[m].code+'" attr-code="'+d[m].code+'"><em>'+d[m].name+"</em><i>"+d[m].code+"</i></span>";n+="</div>"}c+="</ul></div>",e(".pt__areacode_con",this.wrap).html(c+n)},buildMergeHtml:function(a){var t=a.hot,o=a.city,c=' <div class="pt__areacode_tab"><ul class="clearfix">',n="";t.length>0&&(c+='<li class="current">HOT</li>',n+='<div class="pt__areacode_tray clearfix">');for(var r=0;r<t.length;r++)n+='<span class="areacode-normal" title="'+t[r].name+t[r].code+'" attr-code="'+t[r].code+'"><em>'+t[r].name+"</em><i>"+t[r].code+"</i></span>";t.length>0&&(n+="</div>"),c+='<li class="'+(0==t.length?"current":"")+'">ABDEF</li><li>GHJLM</li><li>NPRST</li><li>WXYZ</li>';for(var i=0;i<o.length;i++){var d=o[i].area;0==i&&(n+='<div class="pt__areacode_tray '+(0==t.length?"":"none")+' clearfix">'),n+='<dl class="clearfix"><dt class="tray_letter">'+o[i].letter+'</dt><dd class="tray_area">';for(var s=0;s<d.length;s++)n+='<span class="areacode-normal" title="'+d[s].name+d[s].code+'" attr-code="'+d[s].code+'"><em>'+d[s].name+"</em><i>"+d[s].code+"</i></span>";n+="</dd></dl>","F"!=o[i].letter&&"M"!=o[i].letter&&"T"!=o[i].letter||(n+='</div><div class="pt__areacode_tray none clearfix">'),"Z"==o[i].letter&&(n+="</div>")}c+="</ul></div>",e(".pt__areacode_con",this.wrap).html(c+n)},areaSwitchFn:function(){var a=this;e(".pt__areacode_tab ul li",a.wrap).click(function(){if(!e(this).hasClass("current")){var t=e(this).index(),o=e(".pt__areacode_tray",a.wrap);e(".pt__areacode_tab ul li",a.wrap).removeClass("current"),e(this).addClass("current"),o.addClass("none"),e(o[t]).removeClass("none"),a.isMerge&&e(o[t]).height()>208&&(e(o[t]).css({height:"208px","overflow-y":"hidden"}),a.hasScrollJs?a.getNiceScroll(e(o[t])):a.loadScrollJs(e(o[t])))}})},show:function(){this.positionWrap(),this.wrap.show(),this.outBoxElem&&this.outBoxElem.addClass("show_wrap")},hide:function(){this.wrap.hide(),this.outBoxElem&&this.outBoxElem.removeClass("show_wrap")},positionWrap:function(){var a=this.wrap.css("display");this.wrap.hide();var t=e(document).width(),o=this.wrap.outerWidth(),c=this.input.offset().left,n=this.input.outerHeight(),r=this.input.offset().top,i={left:c+this.offset.x,top:r+n+this.offset.y};o+c+this.offset.x>t&&!this.isMerge&&(i.left=c+this.input.outerWidth()-o),this.wrap.css(i),this.wrap.css("display",a)},createGuid:function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},loadScrollJs:function(e){var a=document.createElement("script"),t=this;a.setAttribute("type","text/javascript"),a.setAttribute("src","//file.40017.cn/tcweb/pc/public/js/common/searchland/jquery.nicescroll.min.js"),document.getElementsByTagName("head")[0].appendChild(a),a.readyState?a.onreadystatechange=function(){"loaded"!=a.readyState&&"complete"!=a.readyState||(a.onreadystatechange=null,t.hasScrollJs=!0,t.getNiceScroll(e))}:a.onload=function(){t.hasScrollJs=!0,t.getNiceScroll(e)}},getNiceScroll:function(e){e.niceScroll({cursorcolor:"#ccc",cursoropacitymax:1,touchbehavior:!1,cursorwidth:"5px",cursorborder:"0",cursorborderradius:"5px",autohidemode:!1})}}}(jQuery);